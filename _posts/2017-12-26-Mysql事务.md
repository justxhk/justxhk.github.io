---
title: Mysql 事务
date: 2017-12-26 10:42:53
categories:
- Mysql
tags:
- Mysql
- 事务
---

# Mysql事务
## 事务的标准特性（ACID）
- A 即 atomicity    原子性
- C 即 consistency  一致性
- I 即 isolation 隔离性
- D 即 durability 持久性

## 事务的隔离级别
- 未提交读
- 提交读
- 可重复读
- 可串行化

### 未提交读
事务中的修改，即使没有提交，对其他事务也是可见的。  

当事务隔离级别为未提交读时，会产生脏读的情况。
> 脏读：事务可以读取其他事务的未提交数据

### 提交读
顾名思义，一个事务，可以看见其他事务提交过后的数据，此隔离级别是大多数数据库的默认隔离级别（但myql不是）。
  
当事务隔离级别为提交读的时候，在事务中执行同样的SQL，可能会得到不同的结果，所以提交读也被称为“不可重复读”

### 可重复读
mysql默认的事务隔离级别，与不可重复读相对应，在解决脏读的基础上，保证了在同一个事务中多次读取相同的记录的结果是一致的。   
在可重复读的隔离级别下，同样会存在“幻行”问题。
> 幻行：某个事务在读取某个范围内的数据时，另一个事务又在该范围内插入了数据，之前的事务再读取该范围的数据时，就会产生幻行。  

mysql的inneDB引擎使用多版本并发控制解决了幻行的问题。

### 可串行化
事务最高的隔离级别，强制事务串行执行，解决了幻读的问题，但由于会在每一条数据上加锁，所以可能产生大量的超时和锁争用问题，所以只有在非常需要数据一致性，并且不存在并发情况下才会使用该隔离级别  

## 多版本并发控制

